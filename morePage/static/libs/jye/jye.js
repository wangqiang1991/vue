!function(n){function t(t){var e=t.instance.getHtmlContent();c.append(e),e.addClass("jye-dom-row"),r&&r(e,t),a&&e.click(function(){n(".jye-dom-selected").removeClass("jye-dom-selected"),n(this).addClass("jye-dom-selected"),s.currentInstanceObject=t,o.empty(),o.append(t.instance.getEditHtml())})}function e(n){var t=i(n),e=new t.class(a,c,o),s={name:n,instance:e,plugin:t};return s}function i(n){for(var t=0;t<s.plugins.length;t++){var e=s.plugins[t];if(n==e.name)return e}return null}const s={};var c=null,o=null,a=!1,r=null;s.getPlugins=function(){return this.plugins},s.initByJson=function(n){var t={rootDom:"#rootDom",editDom:"#editDom",editModel:!0,insertInstanceAfter:function(n,t){}};n=jQuery.extend(t,n),this.init(n.editModel,n.rootDom,n.editDom),r=n.insertInstanceAfter},s.init=function(t,e,i){if(!e)throw"rootDom is null";if("string"==typeof e&&(e=n(e)),c=e,c.addClass("jye-dom-root"),t){if(!i)throw"editDom is null";"string"==typeof i&&(i=n(i)),o=i}a=t},s.createPlugin=function(){return{name:"default",alias:"default",error:function(n,t,e){this.error=n,this.props=t,this.plugin=e},class:function(n,t,e){this.getJsonContent=function(){},this.getHtmlContent=function(n){},this.setJsonContent=function(n){},this.getEditHtml=function(){},this.activate=function(){},this.validate=function(){}}}},s.getJsonContent=function(){for(var n=[],t=0;t<this.instances.length;t++)n.push(this.instances[t].instance.source);return n},s.revertPage=function(n){for(var t=0;t<n.length;t++){var e=n[t],i=this.insertInstance(e.name);i.instance.setJsonContent(e)}},s.installPlugin=function(n){this.plugins.push(n)},s.insertInstance=function(n,i){var s=e(n);return void 0===i?this.instances.push(s):this.instances.splice(i,0,s),t(s),s},s.clear=function(){this.instances=[],c.children().remove()},s.swapPosition=function(n,t,e){if(n!=t){if(1==Math.abs(t-n))return void s.changePosition(n,t,e);n>t&&(n^=t,t=n^t,n^=t);var i=this.instances[n],o=this.instances[t];if(this.instances.splice(t,1,i),this.instances.splice(n,1,o),e){var a=c.children().eq(n),r=a.next(),u=c.children().eq(t),l=u.prev();a.insertAfter(l),u.insertBefore(r)}}},s.changePosition=function(n,t,e){if(n!=t){var i=this.instances[n];if(this.instances.splice(n,1),this.instances.splice(t,0,i),e){var s=c.children().eq(n),o=c.children().eq(t);n>t?s.insertBefore(o):s.insertAfter(o)}}},s.next=function(n){var t=this.instances.indexOf(n);return t!=this.instances.length-1&&(this.changePosition(t,t+1,!0),!0)},s.prve=function(n){var t=this.instances.indexOf(n);return 0!=t&&(this.changePosition(t,t-1,!0),!0)},s.deleteInstance=function(n){if(void 0!==n){var t=-1;t="object"==typeof n?this.instances.indexOf(n):parseInt(n),this.instances.splice(t,1),c.children().eq(t).remove(),o.empty(),this.currentInstanceObject=null}},s.activate=function(){for(var n=0;n<this.instances.length;n++)this.instances[n].instance.activate()},s.validate=function(){for(var n=[],t=0;t<this.instances.length;t++)if(this.instances[t].instance.validate){var e=this.instances[t].instance.validate();e&&n.push(e)}return n},s.instances=[],s.plugins=[],s.currentInstanceObject=null,"undefined"!=typeof window&&(window.jye=s,window.e$=s)}(jQuery);